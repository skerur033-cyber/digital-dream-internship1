<!DOCTYPE html>
<html>
<head>
<title>Expense Tracker</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">
<div class="container mt-4">
<h2 class="text-center text-primary">Expense Tracker Dashboard</h2>

<div class="row text-center mb-3">
<div class="col-md-4">
<div class="card bg-success text-white">
<div class="card-body">
<h4>Total Expense</h4>
<h3>₹ {{total}}</h3>
</div>
</div>
</div>
</div>

<a href="/add/" class="btn btn-success mb-3">Add Expense</a>

<table class="table table-bordered bg-white">
<tr class="table-dark">
<th>Title</th><th>Category</th><th>Amount</th><th>Date</th><th>Action</th>
</tr>

{% for e in expenses %}
<tr>
<td>{{e.title}}</td>
<td>{{e.category}}</td>
<td>₹ {{e.amount}}</td>
<td>{{e.date}}</td>
<td>
<a href="/edit/{{e.id}}" class="btn btn-warning btn-sm">Edit</a>
<a href="/delete/{{e.id}}" class="btn btn-danger btn-sm">Delete</a>
</td>
</tr>
{% endfor %}
</table>

<canvas id="expenseChart"></canvas>
</div>

<script>
const ctx = document.getElementById('expenseChart');
new Chart(ctx, {
    type: 'pie',
    data: {
        labels: {{ categories|safe }},
        datasets: [{
            data: {{ amounts|safe }}
        }]
    }
});
</script>

</body>
</html>
